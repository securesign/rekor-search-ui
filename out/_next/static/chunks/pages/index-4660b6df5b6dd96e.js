(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{48312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(18125)}])},18125:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return pages}});var r=n(85893),i=n(9008),a=n.n(i),o=n(67294),l=n(97387),s=n(71687),d=n(2912),c=n(11161),u=n(76788),h=n(43277),m=n(507),x=n(1129),g=n(71464),f=n(53557),p=n(59455),y=n(30291),v=n(13835),j=n(11752),S=n.n(j);let b=(0,o.createContext)(void 0),RekorClientProvider=e=>{let{children:t}=e,[n,i]=(0,o.useState)(),{publicRuntimeConfig:a}=S()(),l=(0,o.useMemo)(()=>(void 0===n&&(a.NEXT_PUBLIC_REKOR_DEFAULT_DOMAIN?i(a.NEXT_PUBLIC_REKOR_DEFAULT_DOMAIN):i("https://rekor.sigstore.dev")),{client:new v.hG({BASE:n}),baseUrl:n,setBaseUrl:i}),[n]);return(0,r.jsx)(b.Provider,{value:l,children:t})};var w=n(11163);let k=["email","hash","commitSha","uuid","logIndex"],E=new Set(k);async function queryEntries(e,t){let n=await e.index.searchIndex({query:t}),r=n.slice(0,20),i=await Promise.all(r.map(t=>e.entries.getLogEntryByUuid({entryUuid:t})));return{totalCount:n.length,entries:i}}async function digestMessage(e){let t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t),r=Array.from(new Uint8Array(n)),i=r.map(e=>e.toString(16).padStart(2,"0")).join("");return"sha256:".concat(i)}var C=n(1272),I=n(41664),R=n.n(I),N=n(72043),O=n(98683),D=n(84283),A=n(30381),T=n.n(A);function toRelativeDateString(e){return"".concat(T()().to(e)," (").concat(T()(e).format(),")")}var J=n(49676),H=n(17648);let _={[J.S7.digitalSignature]:"Digital Signature",[J.S7.nonRepudiation]:"Non Repudiation",[J.S7.keyEncipherment]:"Key Encipherment",[J.S7.dataEncipherment]:"Data Encipherment",[J.S7.keyAgreement]:"Key Agreement",[J.S7.keyCertSign]:"Key Certificate Sign",[J.S7.cRLSign]:"Certificate Revocation List Sign",[J.S7.encipherOnly]:"Encipher Only",[J.S7.decipherOnly]:"Decipher Only"},U=new TextDecoder("utf-8");function textDecoder(e){return U.decode(e.value)}function utf8StringDecoder(e){return H.VU.fromASN(H.OR.toASN(e.value))}let B={"2.5.29.14":{name:"Subject Key Identifier",toJSON(e){var t;let n=new J.VU(e.rawData);return[null===(t=n.keyId.match(/.{1,2}/g))||void 0===t?void 0:t.join(":").toUpperCase()]}},"2.5.29.15":{name:"Key Usage",toJSON(e){let t=new J.LT(e.rawData),n=[],r=Object.keys(_);for(let e of r)t.usages&e&&n.push(_[e]);return n}},"2.5.29.17":{name:"Subject Alternative Name",toJSON:e=>new J.bY(e.rawData).toJSON()},"2.5.29.19":{name:"Basic Constraints",toJSON(e){let t=new J.nz(e.rawData);return{CA:t.ca}}},"2.5.29.35":{name:"Authority Key Identifier",toJSON(e){var t,n;let r=new J.gT(e.rawData);return{keyid:null===(n=r.keyId)||void 0===n?void 0:null===(t=n.match(/.{1,2}/g))||void 0===t?void 0:t.join(":").toUpperCase(),certid:r.certId}}},"2.5.29.37":{name:"Extended Key Usage",toJSON(e){let t=new J.hR(e.rawData);return t.usages.map(e=>"1.3.6.1.5.5.7.3.3"===e?"Code Signing":e)}},"1.3.6.1.4.1.57264.1.1":{name:"OIDC Issuer",toJSON:textDecoder},"1.3.6.1.4.1.57264.1.2":{name:"GitHub Workflow Trigger",toJSON:textDecoder},"1.3.6.1.4.1.57264.1.3":{name:"GitHub Workflow SHA",toJSON:textDecoder},"1.3.6.1.4.1.57264.1.4":{name:"GitHub Workflow Name",toJSON:textDecoder},"1.3.6.1.4.1.57264.1.5":{name:"GitHub Workflow Repository",toJSON:textDecoder},"1.3.6.1.4.1.57264.1.6":{name:"GitHub Workflow Ref",toJSON:textDecoder},"1.3.6.1.4.1.57264.1.8":{name:"OIDC Issuer (v2)",toJSON:utf8StringDecoder},"1.3.6.1.4.1.57264.1.9":{name:"Build Signer URI",toJSON:utf8StringDecoder},"1.3.6.1.4.1.57264.1.10":{name:"Build Signer Digest",toJSON:utf8StringDecoder},"1.3.6.1.4.1.57264.1.11":{name:"Runner Environment",toJSON:utf8StringDecoder},"1.3.6.1.4.1.57264.1.12":{name:"Source Repository URI",toJSON:utf8StringDecoder},"1.3.6.1.4.1.57264.1.13":{name:"Source Repository Digest",toJSON:utf8StringDecoder},"1.3.6.1.4.1.57264.1.14":{name:"Source Repository Ref",toJSON:utf8StringDecoder},"1.3.6.1.4.1.57264.1.15":{name:"Source Repository Identifier",toJSON:utf8StringDecoder},"1.3.6.1.4.1.57264.1.16":{name:"Source Repository Owner URI",toJSON:utf8StringDecoder},"1.3.6.1.4.1.57264.1.17":{name:"Source Repository Owner Identifier",toJSON:utf8StringDecoder},"1.3.6.1.4.1.57264.1.18":{name:"Build Config URI",toJSON:utf8StringDecoder},"1.3.6.1.4.1.57264.1.19":{name:"Build Config Digest",toJSON:utf8StringDecoder},"1.3.6.1.4.1.57264.1.20":{name:"Build Trigger",toJSON:utf8StringDecoder},"1.3.6.1.4.1.57264.1.21":{name:"Run Invocation URI",toJSON:utf8StringDecoder},"1.3.6.1.4.1.57264.1.22":{name:"Source Repository Visibility At Signing",toJSON:utf8StringDecoder}};function decodex509(e){let t=new J.LF(e),n={};for(let e of t.extensions){let t=e.critical?" (critical)":"",i=B[e.type];if(i)n["".concat(i.name).concat(t)]=i.toJSON(e);else{var r;let i=(r=e.value,[...new Uint8Array(r)].map(e=>e.toString(16).padStart(2,"0")).join(":"));n["".concat(e.type).concat(t)]=i}}let i={data:{"Serial Number":"0x".concat(t.serialNumber)},Signature:{Issuer:t.issuer,Validity:{"Not Before":toRelativeDateString(t.notBefore),"Not After":toRelativeDateString(t.notAfter)},Algorithm:t.publicKey.algorithm,Subject:t.subjectName},"X509v3 extensions":n};return i}var q=n(88261),L=n(68428);function DSSEViewer(e){var t,n,i,a,o;let{dsse:l}=e,s=null===(t=l.signatures)||void 0===t?void 0:t[0],d=window.atob((null==s?void 0:s.verifier)||""),c={title:"Public Key",content:d};return d.includes("BEGIN CERTIFICATE")&&(c.title="Public Key Certificate",c.content=(0,C.$w)(decodex509(d),{noArrayIndent:!0,lineWidth:-1})),(0,r.jsxs)(q.s,{children:[(0,r.jsx)(L.x,{component:L.q.h5,style:{paddingTop:"1em"},children:(0,r.jsx)(R(),{href:"/?hash=".concat(null===(n=l.payloadHash)||void 0===n?void 0:n.algorithm,":").concat(null===(i=l.payloadHash)||void 0===i?void 0:i.value),passHref:!0,children:"Hash"})}),(0,r.jsx)(O.Z,{language:"text",style:D.pJ,children:"".concat(null===(a=l.payloadHash)||void 0===a?void 0:a.algorithm,":").concat(null===(o=l.payloadHash)||void 0===o?void 0:o.value)}),(0,r.jsx)(L.x,{component:L.q.h5,style:{paddingTop:"1em"},children:"Signature"}),(0,r.jsx)(O.Z,{language:"text",style:D.pJ,children:(null==s?void 0:s.signature)||""}),(0,r.jsx)(L.x,{component:L.q.h5,style:{paddingTop:"1em"},children:c.title}),(0,r.jsx)(O.Z,{language:"yaml",style:D.pJ,children:c.content})]})}function HashedRekordViewer(e){var t,n,i,a,o;let{hashedRekord:l}=e,s=window.atob((null===(t=l.signature.publicKey)||void 0===t?void 0:t.content)||""),d={title:"Public Key",content:s};return s.includes("BEGIN CERTIFICATE")&&(d.title="Public Key Certificate",d.content=(0,C.$w)(decodex509(s),{noArrayIndent:!0,lineWidth:-1})),(0,r.jsxs)(q.s,{style:{marginTop:"1.25em"},children:[(0,r.jsx)(L.x,{component:L.q.h5,style:{margin:"1em auto"},children:(0,r.jsx)(R(),{href:"/?hash=".concat(null===(n=l.data.hash)||void 0===n?void 0:n.algorithm,":").concat(null===(i=l.data.hash)||void 0===i?void 0:i.value),passHref:!0,children:"Hash"})}),(0,r.jsx)(O.Z,{language:"text",style:D.pJ,children:"".concat(null===(a=l.data.hash)||void 0===a?void 0:a.algorithm,":").concat(null===(o=l.data.hash)||void 0===o?void 0:o.value)}),(0,r.jsx)(L.x,{component:L.q.h5,style:{margin:"1em auto"},children:"Signature"}),(0,r.jsx)(O.Z,{language:"text",style:D.pJ,children:l.signature.content||""}),(0,r.jsx)(L.x,{component:L.q.h5,style:{margin:"1em auto"},children:d.title}),(0,r.jsx)(O.Z,{language:"yaml",style:D.pJ,children:d.content})]})}function IntotoViewer(e){var t,n,i,a,o;let{intoto:l}=e,s=null===(t=l.content.envelope)||void 0===t?void 0:t.signatures[0],d=window.atob((null==s?void 0:s.publicKey)||""),c={title:"Public Key",content:d};return d.includes("BEGIN CERTIFICATE")&&(c.title="Public Key Certificate",c.content=(0,C.$w)(decodex509(d),{noArrayIndent:!0,lineWidth:-1})),(0,r.jsxs)(q.s,{children:[(0,r.jsx)(L.x,{component:L.q.h5,style:{paddingTop:"1.5em",paddingBottom:"1.5em"},children:(0,r.jsx)(R(),{href:"/?hash=".concat(null===(n=l.content.payloadHash)||void 0===n?void 0:n.algorithm,":").concat(null===(i=l.content.payloadHash)||void 0===i?void 0:i.value),children:"Hash"})}),(0,r.jsx)(O.Z,{language:"text",style:D.pJ,children:"".concat(null===(a=l.content.payloadHash)||void 0===a?void 0:a.algorithm,":").concat(null===(o=l.content.payloadHash)||void 0===o?void 0:o.value)}),(0,r.jsx)(L.x,{component:L.q.h5,style:{paddingTop:"1.5em",paddingBottom:"1.5em"},children:"Signature"}),(0,r.jsx)(O.Z,{language:"text",style:D.pJ,children:window.atob((null==s?void 0:s.sig)||"")}),(0,r.jsx)(L.x,{component:L.q.h5,style:{paddingTop:"1.5em",paddingBottom:"1.5em"},children:c.title}),(0,r.jsx)(O.Z,{language:"yaml",style:D.pJ,children:c.content})]})}var F=n(3804),P=n(58248),K=n(5307),V=n(67038),$=n(41617),Z=n(23103),G=n(76046),W=n(92503),M=n(79762);let Q={replacer:(e,t)=>{if(N.ep.isBase64(t))try{return(0,C.zD)(window.atob(t))}catch(e){}return t}};function EntryCard(e){let{title:t,content:n,dividerProps:i={}}=e;return(0,r.jsxs)(p.k,{style:{padding:"1em"},children:[(0,r.jsx)(F.i,{orientation:{default:"vertical"},style:{margin:"inherit 1em",...i}}),(0,r.jsxs)(y.B,{children:[(0,r.jsx)(L.x,{component:L.q.h3,children:t}),(0,r.jsx)(L.x,{component:L.q.p,style:{overflow:"hidden",textOverflow:"ellipsis",display:"flex",alignItems:"center",justifyContent:"start"},children:n})]})]})}function Entry(e){var t;let n,{entry:i}=e,[a,l]=Object.entries(i)[0],[s,d]=(0,o.useState)([""]),toggle=e=>{let t=s.indexOf(e),n=t>=0?[...s.slice(0,t),...s.slice(t+1,s.length)]:[...s,e];d(n)},c=JSON.parse(window.atob(l.body)),u=null===(t=l.attestation)||void 0===t?void 0:t.data;for(let e=0;N.ep.isBase64(u)&&e<3;e++)u=window.atob(u);let h=function(e){if(!e)return e;try{return JSON.parse(e)}catch(t){return e}}(u);switch(c.kind){case"hashedrekord":n=(0,r.jsx)(HashedRekordViewer,{hashedRekord:c.spec});break;case"intoto":n=(0,r.jsx)(IntotoViewer,{intoto:c.spec});break;case"dsse":n=(0,r.jsx)(DSSEViewer,{dsse:c.spec})}return(0,r.jsx)(P.Z,{style:{margin:"1.5em auto 2em"},children:(0,r.jsxs)(K.e,{children:[(0,r.jsxs)(L.x,{component:L.q.h2,style:{margin:"1.25em auto",overflow:"hidden",textOverflow:"ellipsis"},children:["Entry UUID:"," ",(0,r.jsx)(R(),{href:"/?uuid=".concat(a),passHref:!0,children:a})]}),(0,r.jsx)(F.i,{}),(0,r.jsxs)(V.r,{hasGutter:!0,children:[(0,r.jsx)($.P,{sm:3,children:(0,r.jsx)(EntryCard,{title:"Type",content:c.kind,dividerProps:{display:"none"}})}),(0,r.jsx)($.P,{sm:3,children:(0,r.jsx)(EntryCard,{title:"Log Index",content:(0,r.jsx)(R(),{href:"/?logIndex=".concat(l.logIndex),passHref:!0,children:l.logIndex})})}),(0,r.jsx)($.P,{sm:6,children:(0,r.jsx)(EntryCard,{title:"Integrated time",content:toRelativeDateString(new Date(1e3*l.integratedTime))})})]}),(0,r.jsx)(F.i,{}),n,(0,r.jsx)(q.s,{style:{margin:"0.75em auto"},children:(0,r.jsx)(o.Fragment,{children:(0,r.jsx)(Z.U,{children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(G.Q,{children:[(0,r.jsx)(W.B,{id:"body-header","aria-controls":"body-content",isExpanded:!n,onClick:()=>{toggle("body-content")},children:(0,r.jsx)(L.x,{children:"Raw Body"})}),(0,r.jsx)(M.v,{isHidden:!s.includes("body-content"),children:(0,r.jsx)(O.Z,{language:"yaml",style:D.pJ,children:(0,C.$w)(c,Q)})})]}),h&&(0,r.jsxs)(G.Q,{children:[(0,r.jsx)(W.B,{"aria-controls":"attestation-content",id:"attestation-header",isExpanded:!n,onClick:()=>{toggle("attestation-content")},children:(0,r.jsx)(L.x,{children:"Attestation"})}),(0,r.jsx)(M.v,{isHidden:!s.includes("attestation-content"),children:(0,r.jsx)(O.Z,{language:"yaml",style:D.pJ,children:(0,C.$w)(h)})})]}),l.verification&&(0,r.jsxs)(G.Q,{children:[(0,r.jsx)(W.B,{"aria-controls":"verification-content",id:"verification-header",isExpanded:!n,onClick:()=>{toggle("verification-content")},children:(0,r.jsx)(L.x,{children:"Verification"})}),(0,r.jsx)(M.v,{isHidden:!s.includes("verification-content"),children:(0,r.jsx)(O.Z,{language:"yaml",style:D.pJ,children:(0,C.$w)(l.verification)})})]})]})})})})]})})}var z=n(60175),X=n(71572),Y=n(19016),ee=n(52111),et=n(28745),en=n(53827),er=n(68782),ei=n(37736),ea=n(74898),eo=n(87536),el=n(64680),es=n(92498),ed=n(77373);let ec={email:{name:"Email",placeholder:"jdoe@example.com",rules:{pattern:{value:/\S+@\S+\.\S+/,message:"Entered value does not match the email format: 'S+@S+.S+'"}},tooltipText:(0,r.jsx)(r.Fragment,{children:"Search by the signer's email address."})},hash:{name:"Hash",placeholder:"sha256:8ceb4ab8127731473a9ec81140cb6849cf8e970cda31baef099df48ba3264441",rules:{pattern:{value:/^(sha256:)?[0-9a-fA-F]{64}$|^(sha1:)?[0-9a-fA-F]{40}$/,message:"Entered value does not match the hash format: '^(sha256:)?[0-9a-fA-F]{64}$|^(sha1:)?[0-9a-fA-F]{40}$'"}},tooltipText:(0,r.jsx)(r.Fragment,{children:"Search by the SHA1 or SHA2 hash value."})},commitSha:{name:"Commit SHA",helperText:(0,r.jsxs)(r.Fragment,{children:["Only compatible with"," ",(0,r.jsx)("a",{href:"https://access.redhat.com/documentation/en-us/red_hat_trusted_artifact_signer/2024-q1/html/deployment_guide/verify_the_trusted_artifact_signer_installation#signing-and-verifying-commits-by-using-gitsign-from-the-command-line-interface_deploy",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"},children:"gitsign"})," ","entries"]}),placeholder:"6d78e27dfcf83eaad6ef73c4695d1ddc663f5555",rules:{pattern:{value:/^[0-9a-fA-F]{40}$/,message:"Entered value does not match the commit SHA format: '^[0-9a-fA-F]{40}$'"}},tooltipText:(0,r.jsx)(r.Fragment,{children:"Search by the commit hash."})},uuid:{name:"Entry UUID",placeholder:"24296fb24b8ad77a71b9c1374e207537bafdd75b4f591dcee10f3f697f150d7cc5d0b725eea641e7",rules:{pattern:{value:/^[0-9a-fA-F]{64}|[0-9a-fA-F]{80}$/,message:"Entered value does not match the entry UUID format: '^[0-9a-fA-F]{64}|[0-9a-fA-F]{80}$'"}},tooltipText:(0,r.jsx)(r.Fragment,{children:"Search by the universally unique identifier value."})},logIndex:{name:"Log Index",placeholder:"1234567",rules:{min:{value:0,message:"Entered value must be larger than 0"},pattern:{value:/^\d+$/,message:"Entered value must be of type int64"}},tooltipText:(0,r.jsx)(r.Fragment,{children:"Search by the log index number."})}};function SearchForm(e){let{defaultValues:t,onSubmit:n,isLoading:i}=e,{handleSubmit:a,control:l,watch:s,setValue:d,trigger:c}=(0,eo.cI)({mode:"all",reValidateMode:"onChange",defaultValues:{attribute:"email",value:""}});(0,o.useEffect)(()=>{t&&(d("attribute",t.attribute),d("value",t.value))},[t,d]);let u=s("attribute");(0,o.useEffect)(()=>{l.getFieldState("attribute").isTouched&&c()},[u,c,l]);let h=Object.assign({required:{value:!0,message:"A value is required"},pattern:void 0,min:void 0},ec[u].rules);return(0,r.jsx)(z.l,{onSubmit:a(n),children:(0,r.jsxs)(p.k,{children:[(0,r.jsx)(p.k,{direction:{default:"column"},flex:{default:"flex_3"},children:(0,r.jsx)(y.B,{children:(0,r.jsx)(eo.Qr,{name:"attribute",control:l,render:e=>{let{field:t}=e;return(0,r.jsx)(X.c,{label:"Attribute",fieldId:"rekor-search-attribute",labelIcon:(0,r.jsx)(Y.J,{bodyContent:ec[u].tooltipText,position:"right",children:(0,r.jsx)("button",{type:"button","aria-label":"More info for attribute field",onClick:e=>e.preventDefault(),"aria-describedby":"attribute-info",className:ed.Z.formGroupLabelHelp,children:(0,r.jsx)(el.by,{})})}),children:(0,r.jsx)(ee.i,{id:"rekor-search-attribute",...t,label:"Attribute",children:k.map(e=>(0,r.jsx)(et.j,{label:ec[e].name,value:e},e))})})}})})}),(0,r.jsx)(p.k,{direction:{default:"column"},flex:{default:"flex_3"},children:(0,r.jsx)(y.B,{children:(0,r.jsx)(eo.Qr,{name:"value",control:l,rules:h,render:e=>{var t;let{field:n,fieldState:i}=e;return(0,r.jsxs)(X.c,{label:ec[u].name,labelInfo:ec[u].helperText,fieldId:"rekor-search-".concat(ec[u].name.toLowerCase()),children:[(0,r.jsx)(en.oi,{"aria-label":"".concat(ec[u].name," input field"),...n,id:"rekor-search-".concat(ec[u].name.toLowerCase()),label:ec[u].name,placeholder:ec[u].placeholder,type:"email"===ec[u].name?"email":"text",validated:i.invalid?"error":"default"}),i.invalid&&(0,r.jsx)(er.Q,{children:(0,r.jsx)(ei.p,{children:(0,r.jsx)(ea.u,{icon:(0,r.jsx)(es.$O,{}),variant:i.invalid?"error":"success",children:i.invalid?null===(t=i.error)||void 0===t?void 0:t.message:ec[u].helperText})})})]})}})})}),(0,r.jsx)(p.k,{direction:{default:"column"},alignSelf:{default:"alignSelfFlexStart"},flex:{default:"flex_1"},children:(0,r.jsx)(y.B,{style:{marginTop:"2em"},children:(0,r.jsx)(g.zx,{variant:"primary",id:"search-form-button",isBlock:!0,isLoading:i,type:"submit",spinnerAriaLabel:"Loading",spinnerAriaLabelledBy:"search-form-button",children:"Search"})})})]})})}var eu=n(17421),eh=n(9097);function Explorer_Error(e){var t;let n,{error:i}=e,a="Unknown error";return i&&"object"==typeof i&&Object.hasOwn(i,"body")?((t=i.body)&&"object"==typeof t&&(a="Code ".concat(i.body.code,": ").concat(i.body.message)),n="".concat(i.url,": ").concat(i.status)):"string"==typeof i?a=i:i instanceof TypeError&&(a=i.message,n=i.stack),(0,r.jsx)(eu.b,{style:{margin:"1em auto"},title:a,variant:"danger",children:n})}function RekorList(e){let{rekorEntries:t}=e;return t?0===t.entries.length?(0,r.jsx)(eu.b,{title:"No matching entries found",variant:"info"}):(0,r.jsxs)("div",{style:{margin:"2em auto"},children:[(0,r.jsxs)(L.x,{component:L.q.p,children:["Showing ",t.entries.length," of ",null==t?void 0:t.totalCount]}),t.entries.map(e=>(0,r.jsx)(Entry,{entry:e},Object.values(e)[0].logIndex))]}):(0,r.jsx)(o.Fragment,{})}function LoadingIndicator(){return(0,r.jsx)(p.k,{alignItems:{default:"alignItemsCenter"},direction:{default:"column"},style:{margin:"1em auto"},children:(0,r.jsx)(eh.$,{})})}function Explorer(){let e=(0,w.useRouter)(),[t,n]=(0,o.useState)(),[i,a]=(0,o.useState)(),l=function(){let e=function(){let e=(0,o.useContext)(b);if(!e)throw Error("Hook useRekorClient requires RekorClientContext.");return e.client}();return(0,o.useCallback)(async t=>{switch(t.attribute){case"logIndex":return{totalCount:1,entries:[await e.entries.getLogEntryByIndex({logIndex:t.query})]};case"uuid":return{totalCount:1,entries:[await e.entries.getLogEntryByUuid({entryUuid:t.query})]};case"email":return queryEntries(e,{email:t.query});case"hash":let n=t.query;return n.startsWith("sha256:")||(n="sha256:".concat(n)),queryEntries(e,{hash:n});case"commitSha":let r=await digestMessage(t.query);return queryEntries(e,{hash:r})}},[e])}(),[s,d]=(0,o.useState)(),[c,u]=(0,o.useState)(),[h,m]=(0,o.useState)(!1);(0,o.useEffect)(()=>{!async function(){if(i){u(void 0),m(!0);try{d(await l(i))}catch(e){u(e)}m(!1)}}()},[i,l]);let x=(0,o.useCallback)(t=>{e.push({pathname:e.pathname,query:{[t.attribute]:t.value}},"/?".concat(t.attribute,"=").concat(t.value),{shallow:!0})},[e]);return(0,o.useEffect)(()=>{let t=Object.keys(e.query).find(e=>E.has(e)),r=t&&e.query[t];!r||Array.isArray(r)||n({attribute:t,value:r})},[e.query]),(0,o.useEffect)(()=>{if(t){if("logIndex"===t.attribute){let e=parseInt(t.value);isNaN(e)||a({attribute:t.attribute,query:e})}else a({attribute:t.attribute,query:t.value})}},[t]),(0,r.jsxs)(o.Fragment,{children:[(0,r.jsx)(SearchForm,{defaultValues:t,isLoading:h,onSubmit:x}),c?(0,r.jsx)(Explorer_Error,{error:c}):h?(0,r.jsx)(LoadingIndicator,{}):(0,r.jsx)(RekorList,{rekorEntries:s})]})}var em=n(51483);let isValidUrl=e=>{try{let t=new URL(e);return t.hostname.includes(".")}catch(e){return!1}};function Settings(e){let{open:t,onClose:n}=e,[i,a]=function(){let e=(0,o.useContext)(b);if(!e)throw Error("Hook useRekorBaseUrl requires RekorClientContext.");return[e.baseUrl,e.setBaseUrl]}(),{control:l,formState:{errors:s,isValid:d},handleSubmit:c}=(0,eo.cI)({mode:"all",reValidateMode:"onChange",defaultValues:{endpoint:i}}),onSave=e=>{a(e.currentTarget.value),n()};return(0,r.jsx)(em.u,{variant:em.v.small,title:"Settings",isOpen:t,onClose:n,actions:[(0,r.jsx)(g.zx,{variant:"primary",isDisabled:!d,onClick:onSave,type:"submit",children:"Confirm"},"confirm"),(0,r.jsx)(g.zx,{variant:"link",onClick:n,children:"Cancel"},"cancel")],children:(0,r.jsx)(z.l,{id:"settings-form",onSubmit:c(onSave),children:(0,r.jsx)(eo.Qr,{name:"endpoint",control:l,rules:{required:{value:!0,message:"To continue, specify an endpoint in xxxx format"},validate:e=>!!e&&function(e){try{let t=new URL(e);return["https:"].includes(t.protocol)}catch(e){return!1}}(e)&&isValidUrl(e)||"To continue, provide a valid URL, starting with https://"},render:e=>{var t;let{field:n,fieldState:a}=e;return(0,r.jsxs)(X.c,{label:"Override Rekor Endpoint",labelIcon:(0,r.jsx)(Y.J,{bodyContent:"Specify your private Rekor endpoint URL.",children:(0,r.jsx)("button",{type:"button","aria-label":"Rekor endpoint URL",onClick:e=>e.preventDefault(),"aria-describedby":"rekor-endpoint-url",className:ed.Z.formGroupLabelHelp,children:(0,r.jsx)(el.by,{})})}),isRequired:!0,fieldId:"rekor-endpoint-override",children:[(0,r.jsx)(en.oi,{type:"text",...n,"aria-invalid":s.endpoint?"true":"false",placeholder:void 0===i?"https://private.rekor.example.com":i,label:"name","aria-label":"override rekor endpoint",id:"rekor-endpoint-override",validated:a.invalid?"error":"default"}),a.invalid&&(0,r.jsx)(er.Q,{children:(0,r.jsx)(ei.p,{children:(0,r.jsx)(ea.u,{icon:(0,r.jsx)(es.$O,{}),variant:"error",children:null===(t=a.error)||void 0===t?void 0:t.message})})})]})}})})})}var ex=n(41634),eg=n(25675),ef=n.n(eg),ep=n(5152),ey=n.n(ep);let NoSSRWrapper=e=>(0,r.jsx)(o.Fragment,{children:e.children});var ev=ey()(()=>Promise.resolve(NoSSRWrapper),{ssr:!1}),ej={src:".//_next/static/media/Logo-Red_Hat-Trusted_Artifact_Signer-A-Reverse-RGB.22a59824.svg",height:350,width:917,blurWidth:0,blurHeight:0};let Home=()=>{let[e,t]=(0,o.useState)(!1);return(0,r.jsx)(l.T,{header:(0,r.jsxs)(s.H,{children:[(0,r.jsx)(d.d,{children:(0,r.jsx)(R(),{href:"/",children:(0,r.jsx)(ef(),{src:ej,alt:"Red Hat Trusted Artifact Signer logo",priority:!0,width:127,height:48})})}),(0,r.jsx)(c.f,{children:(0,r.jsx)(u.o,{ouiaId:"masthead-toolbar",id:"masthead-toolbar",isFullHeight:!0,isStatic:!0,children:(0,r.jsx)(h.c,{id:"masthead-toolbar",children:(0,r.jsx)(m.k,{variant:"icon-button-group",align:{default:"alignRight"},spacer:{default:"spacerNone",md:"spacerMd"},children:(0,r.jsx)(m.k,{variant:"icon-button-group",visibility:{default:"hidden",lg:"visible"},children:(0,r.jsx)(x.E,{children:(0,r.jsx)(g.zx,{"aria-label":"Settings",onClick:()=>t(!0),variant:"plain",icon:(0,r.jsx)(ex.IE,{}),ouiaId:"setting-button"})})})})})})})]}),children:(0,r.jsxs)(f.NP,{children:[(0,r.jsxs)(a(),{children:[(0,r.jsx)("title",{children:"Rekor Search"}),(0,r.jsx)("meta",{name:"description",content:"Search the Rekor public transparency log"}),(0,r.jsx)("link",{rel:"icon",href:"/Logo-Red_Hat-Trusted_Artifact_Signer-A-Reverse-RGB.svg"})]}),(0,r.jsx)(Settings,{open:e,onClose:()=>t(!1)}),(0,r.jsx)(p.k,{justifyContent:{default:"justifyContentCenter"},children:(0,r.jsx)(y.B,{style:{width:"70vw"},children:(0,r.jsx)(ev,{children:(0,r.jsx)(Explorer,{})})})})]})})};var pages=()=>(0,r.jsx)(RekorClientProvider,{children:(0,r.jsx)(Home,{})})}},function(e){e.O(0,[885,72,774,888,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);